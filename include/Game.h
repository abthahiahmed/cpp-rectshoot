#ifndef _GAME_H_
#define _GAME_H_

#pragma once

#include <iostream>
#include <vector>

#include <SDL2/SDL.h>
#include <SDL2/SDL_ttf.h>


#include "Bound.h"
#include "Rect.h"
#include "Explode.h"

using namespace std;

class Game{
private:
	SDL_Renderer *ren;
	SDL_Window *win;
	SDL_Event event;
	
	int width, height;
	int mouseX, mouseY;
	
	int fps;
	bool isRunning;
	
	string font_path;
	
	SDL_Color bgColor;
	
	vector<SDL_Color> rectColors;
	vector<SDL_Color> fontColors;
	
	
	char lvl1[23][18] = {
		"#===============#",
		"#...............#",
		"#rrrrrrr.rrrrrrr#",
		"#...b.......b...#",
		"#...br.rrbb.b...#",
		"#...bgggyyyyb...#",
		"#yyyy.......yyyy#",
		"#...rrr.ggg...rr#",		
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
	};
	char lvl2[23][18] = {
		"#===============#",
		"#............r..#",
		"#....bbbr....r..#",
		"#bbbrr..r....r..#",
		"#...y...ryyyrrrr#",
		"#...y...........#",
		"#yyy............#",
		"#...............#",		
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
	};
	char lvl3[23][18] = {
		"#===============#",
		"#bb.bbrrr.rryyy.#",
		"#.yyy..rrrrrb...#",
		"#...yyyy....b...#",
		"#....bb.....b...#",
		"#....bb.....byyy#",
		"#yyy.yyy........#",
		"#...............#",		
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
	};
	char lvl4[23][18] = {
		"#===============#",
		"#gggggg...gggggg#",
		"#...yyyy.yyyy...#",
		"#...b.......r...#",
		"#...b.......r...#",
		"#bb.bgggg.ggr.rr#",
		"#...............#",
		"#...............#",		
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
	};
	char lvl5[23][18] = {
		"#===============#",
		"#...............#",
		"#...rrrrrrrrr...#",
		"#...y...g...b...#",
		"#...y...g...b...#",
		"#...ygggggggg...#",
		"#.......g.......#",
		"#...bbbb.bbbb...#",		
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
		"#...............#",
	};	
	
	char field[23][18];
	
	int lvl;
	int score;
	
	vector<Bound> bounds;
	vector<Rect> rects;
	
	vector<int> rect_lvl;
	
	vector<Explode> explodes;
	
	
	int current;
	bool isAssembled;
	
	bool isGameOver;
	bool isGameDone;
	
	int lastRect;
	
	void run();
	void draw();
	void update();
	void handleEvent();
	void nextLVL();
	void reset();
	
	
	int random(int a, int b){
		return a + rand() % b;
	}	
	
	void drawText(int x, int y, int font_size, string text, SDL_Color color);
	void drawTextCenter(int x, int y, int font_size, string text, SDL_Color color);
	
	
	
public:
	Game();
	void setup();
	void start();
	void clean();
	

	
};


#endif